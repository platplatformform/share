<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SHARE</title>
<style>
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}

@font-face {
    font-family: 'CustomFont';
    src: url('Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'CustomFont';
    src: url('Italic.woff') format('woff');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'CustomFont';
    src: url('Bold.woff') format('woff');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'CustomFont';
    src: url('Bold_Italic.woff') format('woff');
    font-weight: bold;
    font-style: italic;
}


:root {
  --gold: #A88A4E;
  --font: 'CustomFont', sans-serif;
}

body, main, section {
  width: 100dvw;
  height: 100dvh;
  font-family: var(--font);
  color: var(--gold);
  overflow: hidden;
}

section {
  width: 100%;
  height: 100%;
}

#map {
  width: 100% !important;
  height: 100% !important;
}

.overlay {
  width: 30dvw;
  height: 100%;
  position: absolute;
  top: 0;
  right: 0;
  background-color: white;
  border-left: 2px solid var(--gold);
  z-index: 100;
  padding: 1rem;
  overflow: scroll;
}

.overlay-title {
  font-size: 1.75rem;
  text-transform: uppercase;
  margin-bottom: 1rem;
}

.location {
  display: flex;
  flex-direction: column;
  width: 100%;
  margin-bottom: 1rem;
  cursor: pointer;
}

.meta {
  display: flex;
  width: 100%;
}

.number {
  width: 2rem;
}

.info {
  width: 100%;
}

.expand {
  margin-top: 1rem;
  overflow: hidden;
  max-height: 0;
  transition: max-height 0.5s ease-out; /* Smooth transition */
}

.expand.open {
    max-height: none; /* Allow natural height when open */
}

*::-webkit-scrollbar {
  display: none;
}

* {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.logo {
  width: min-content;
  font-size: 4rem;
  font-family: var(--font);
  color: var(--gold);
  font-weight: bold;
  position: absolute;
  top: 0.25rem;
  left: 0.5rem;
  z-index: 200;
}

@media screen and (max-width: 700px) {
.overlay {
  height: 30dvh;
  width: 100dvw;
  bottom: 0;
  right: inherit;
  top: inherit;
  border-top: 2px solid var(--gold);
  padding: 1rem;
}
}

</style>
<script src='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js'></script>
<link href='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css' rel='stylesheet' />
</head>

<body>
<main>

<section class="logo">
  SHARE
</section>

  <section class="overlay">

    <div class="overlay-title">
      Locations
    </div>

    <div class="location" data-value="1">
        <div class="meta">
            <div class="number">1</div>
            <div class="info">
                <strong>Iliff School of Theology</strong><br>
                2323 East Iliff Ave
            </div>
        </div>
        <div class="expand">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>

    <div class="location" data-value="2">
        <div class="meta">
            <div class="number">2</div>
            <div class="info">
                <strong>Historic House and Denver Landmark “The Joshel House”</strong><br>
                220 S Dahlia St
            </div>
        </div>
        <div class="expand">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>

    <div class="location" data-value="3">
        <div class="meta">
            <div class="number">3</div>
            <div class="info">
                <strong>Bella Vista Mexican Restaurant</strong><br>
                127 E 20th Ave
            </div>
        </div>
        <div class="expand">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>

    <div class="location" data-value="4">
        <div class="meta">
            <div class="number">4</div>
            <div class="info">
                <strong>Globeville Recreation Center</strong><br>
                4496 Grant St
            </div>
        </div>
        <div class="expand">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>

    <div class="location" data-value="5">
        <div class="meta">
            <div class="number">5</div>
            <div class="info">
                <strong>Latino Cultural Arts Center</strong><br>
                2701 W Colfax Ave
            </div>
        </div>
        <div class="expand">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </div>

  </section>

  <section>

    <div id='map' style='width: 400px; height: 300px;'></div>
    <script>
    var map = new maplibregl.Map({
        container: 'map',
        style: '/style.json',
        center: [-104.931531, 39.742043],
        zoom: 12,
        maplibreLogo: false,
        minZoom: 10,
        maxZoom: 17
    });

    map.on('load', async () => {
        const image = await map.loadImage('https://maplibre.org/maplibre-gl-js/docs/assets/osgeo-logo.png');
        map.addImage('custom-marker', image.data);

        const response = await fetch('https://api.maptiler.com/data/feae301f-fee4-47f7-b6ca-5b218826a974/features.json?key=SfOiihyazAWy61OcRNh0');
        const geojson = await response.json();

        map.addSource('points', {
            'type': 'geojson',
            'data': geojson
        });

        map.addLayer({
            'id': 'conferences',
            'type': 'circle',
            'source': 'points',
            paint: {
                'circle-radius': 10,
                'circle-color': '#A88A4E'
            }
        });

        map.addLayer({
            'id': 'conferences-labels',
            'type': 'symbol',
            'source': 'points',
            'layout': {
                'text-field': ['get', 'Number'],
                'text-font': ['CustomFont'],
                'text-size': 12,
                'text-offset': [0, 0],
                'text-anchor': 'center'
            },
            'paint': {
                'text-color': '#FFFFFF'
            }
        });

        const bounds = map.getBounds();
        const padding = 0.05;
        const maxBounds = [
            [bounds.getWest() - padding, bounds.getSouth() - padding],
            [bounds.getEast() + padding, bounds.getNorth() + padding]
        ];

        map.setMaxBounds(maxBounds);

        map.on('mouseenter', 'conferences', () => {
            map.getCanvas().style.cursor = 'pointer';
        });

        map.on('mouseleave', 'conferences', () => {
            map.getCanvas().style.cursor = '';
        });

        document.querySelectorAll('.location').forEach(div => {
            div.addEventListener('click', function() {
                const value = parseInt(this.getAttribute('data-value'));

                const feature = geojson.features.find(f => f.properties.Number === value);

                if (feature) {
                    const coordinates = feature.geometry.coordinates;

                    map.flyTo({
                        center: coordinates,
                        zoom: 17,
                        essential: true
                    });
                }
            });
        });

        map.on('click', 'conferences', (e) => {
            const features = map.queryRenderedFeatures(e.point, { layers: ['conferences'] });

            if (features.length) {
                const number = features[0].properties.Number;

                const locationDiv = document.querySelector(`.location[data-value="${number}"]`);

                if (locationDiv) {
                    document.querySelectorAll('.expand.open').forEach(expandDiv => {
                        expandDiv.classList.remove('open');
                        expandDiv.style.maxHeight = '0';
                    });
                    const expandDiv = locationDiv.querySelector('.expand');
                    if (expandDiv) {
                        expandDiv.classList.add('open');
                        expandDiv.style.maxHeight = expandDiv.scrollHeight + 'px';
                    }
                }
            }
        });


    });





    </script>

  </section>

</main>
<script>
document.querySelectorAll('.location').forEach(locationDiv => {
    locationDiv.addEventListener('click', function() {
        document.querySelectorAll('.expand.open').forEach(expandDiv => {
            expandDiv.classList.remove('open');
            expandDiv.style.maxHeight = '0';
        });
        const expandDiv = this.querySelector('.expand');
        if (expandDiv) {
            if (expandDiv.classList.contains('open')) {
                expandDiv.classList.remove('open');
                expandDiv.style.maxHeight = '0';
            } else {
                expandDiv.classList.add('open');
                expandDiv.style.maxHeight = expandDiv.scrollHeight + 'px';
            }
        }
    });
});
</script>
</body>
</html>
